2025-08-29 19:02:24,031 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-29 19:02:24,031 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-29 19:02:24,037 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-29 19:02:24,037 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-29 19:02:24,040 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-29 19:02:24,040 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-29 19:02:24,045 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-29 19:02:24,052 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,054 - sqlalchemy.engine.Engine - INFO - [generated in 0.00287s] ('qr_codes', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,067 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,067 - sqlalchemy.engine.Engine - INFO - [cached since 0.0165s ago] ('app_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,069 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,069 - sqlalchemy.engine.Engine - INFO - [cached since 0.01941s ago] ('cars', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,071 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,073 - sqlalchemy.engine.Engine - INFO - [cached since 0.02212s ago] ('products', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,075 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,078 - sqlalchemy.engine.Engine - INFO - [cached since 0.02565s ago] ('news_articles', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,080 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,080 - sqlalchemy.engine.Engine - INFO - [cached since 0.02848s ago] ('lotteries', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,082 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,082 - sqlalchemy.engine.Engine - INFO - [cached since 0.03129s ago] ('orders', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,084 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,084 - sqlalchemy.engine.Engine - INFO - [cached since 0.03338s ago] ('price_requests', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,086 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,086 - sqlalchemy.engine.Engine - INFO - [cached since 0.03541s ago] ('point_transactions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,088 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,088 - sqlalchemy.engine.Engine - INFO - [cached since 0.03726s ago] ('app_qr_scans', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,090 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,090 - sqlalchemy.engine.Engine - INFO - [cached since 0.03939s ago] ('support_tickets', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,092 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,094 - sqlalchemy.engine.Engine - INFO - [cached since 0.04172s ago] ('support_messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,094 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:02:24,096 - sqlalchemy.engine.Engine - INFO - [cached since 0.04411s ago] ('user_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:02:24,100 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE app_users (
	id UUID NOT NULL, 
	user_id VARCHAR NOT NULL, 
	name VARCHAR NOT NULL, 
	email VARCHAR NOT NULL, 
	phone VARCHAR, 
	password_hash VARCHAR NOT NULL, 
	user_type VARCHAR, 
	points INTEGER, 
	role VARCHAR, 
	registration_date TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	is_active BOOLEAN, 
	last_login TIMESTAMP WITHOUT TIME ZONE, 
	telegram_id INTEGER, 
	PRIMARY KEY (id)
)


2025-08-29 19:02:24,101 - sqlalchemy.engine.Engine - INFO - [no key 0.00152s] ()
2025-08-29 19:02:24,116 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-29 19:02:24,118 - __main__ - ERROR - Ошибка запуска API сервера: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InsufficientPrivilegeError'>: нет доступа к схеме public
[SQL: 
CREATE TABLE app_users (
	id UUID NOT NULL, 
	user_id VARCHAR NOT NULL, 
	name VARCHAR NOT NULL, 
	email VARCHAR NOT NULL, 
	phone VARCHAR, 
	password_hash VARCHAR NOT NULL, 
	user_type VARCHAR, 
	points INTEGER, 
	role VARCHAR, 
	registration_date TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	is_active BOOLEAN, 
	last_login TIMESTAMP WITHOUT TIME ZONE, 
	telegram_id INTEGER, 
	PRIMARY KEY (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-29 19:03:03,122 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-29 19:03:03,122 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-29 19:03:03,124 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-29 19:03:03,126 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-29 19:03:03,128 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-29 19:03:03,128 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-29 19:03:03,131 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-29 19:03:03,139 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,142 - sqlalchemy.engine.Engine - INFO - [generated in 0.00154s] ('qr_codes', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,154 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,154 - sqlalchemy.engine.Engine - INFO - [cached since 0.01711s ago] ('app_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,160 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,160 - sqlalchemy.engine.Engine - INFO - [cached since 0.02073s ago] ('cars', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,163 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,165 - sqlalchemy.engine.Engine - INFO - [cached since 0.02407s ago] ('products', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,167 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,167 - sqlalchemy.engine.Engine - INFO - [cached since 0.02704s ago] ('news_articles', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,169 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,169 - sqlalchemy.engine.Engine - INFO - [cached since 0.03025s ago] ('lotteries', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,172 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,173 - sqlalchemy.engine.Engine - INFO - [cached since 0.03304s ago] ('orders', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,173 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,175 - sqlalchemy.engine.Engine - INFO - [cached since 0.03525s ago] ('price_requests', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,176 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,179 - sqlalchemy.engine.Engine - INFO - [cached since 0.03834s ago] ('point_transactions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,179 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,181 - sqlalchemy.engine.Engine - INFO - [cached since 0.04085s ago] ('app_qr_scans', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,182 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,182 - sqlalchemy.engine.Engine - INFO - [cached since 0.04304s ago] ('support_tickets', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,184 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,186 - sqlalchemy.engine.Engine - INFO - [cached since 0.04536s ago] ('support_messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,187 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:03:03,187 - sqlalchemy.engine.Engine - INFO - [cached since 0.04798s ago] ('user_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:03:03,191 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE app_users (
	id UUID NOT NULL, 
	user_id VARCHAR NOT NULL, 
	name VARCHAR NOT NULL, 
	email VARCHAR NOT NULL, 
	phone VARCHAR, 
	password_hash VARCHAR NOT NULL, 
	user_type VARCHAR, 
	points INTEGER, 
	role VARCHAR, 
	registration_date TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	is_active BOOLEAN, 
	last_login TIMESTAMP WITHOUT TIME ZONE, 
	telegram_id INTEGER, 
	PRIMARY KEY (id)
)


2025-08-29 19:03:03,193 - sqlalchemy.engine.Engine - INFO - [no key 0.00151s] ()
2025-08-29 19:03:03,199 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-29 19:03:03,199 - __main__ - ERROR - Ошибка запуска API сервера: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InsufficientPrivilegeError'>: нет доступа к схеме public
[SQL: 
CREATE TABLE app_users (
	id UUID NOT NULL, 
	user_id VARCHAR NOT NULL, 
	name VARCHAR NOT NULL, 
	email VARCHAR NOT NULL, 
	phone VARCHAR, 
	password_hash VARCHAR NOT NULL, 
	user_type VARCHAR, 
	points INTEGER, 
	role VARCHAR, 
	registration_date TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	is_active BOOLEAN, 
	last_login TIMESTAMP WITHOUT TIME ZONE, 
	telegram_id INTEGER, 
	PRIMARY KEY (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-29 19:06:07,413 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-29 19:06:07,413 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-29 19:06:07,415 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-29 19:06:07,415 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-29 19:06:07,418 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-29 19:06:07,418 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-29 19:06:07,423 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-29 19:06:07,430 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,430 - sqlalchemy.engine.Engine - INFO - [generated in 0.00126s] ('qr_codes', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,438 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,438 - sqlalchemy.engine.Engine - INFO - [cached since 0.01222s ago] ('app_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,445 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,446 - sqlalchemy.engine.Engine - INFO - [cached since 0.01577s ago] ('cars', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,448 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,448 - sqlalchemy.engine.Engine - INFO - [cached since 0.01839s ago] ('products', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,452 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,452 - sqlalchemy.engine.Engine - INFO - [cached since 0.02107s ago] ('news_articles', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,454 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,455 - sqlalchemy.engine.Engine - INFO - [cached since 0.02423s ago] ('lotteries', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,457 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,459 - sqlalchemy.engine.Engine - INFO - [cached since 0.02727s ago] ('orders', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,460 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,460 - sqlalchemy.engine.Engine - INFO - [cached since 0.02926s ago] ('price_requests', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,462 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,462 - sqlalchemy.engine.Engine - INFO - [cached since 0.03197s ago] ('point_transactions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,462 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,462 - sqlalchemy.engine.Engine - INFO - [cached since 0.03401s ago] ('app_qr_scans', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,466 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,468 - sqlalchemy.engine.Engine - INFO - [cached since 0.03612s ago] ('support_tickets', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,468 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,469 - sqlalchemy.engine.Engine - INFO - [cached since 0.03799s ago] ('support_messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,471 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-29 19:06:07,472 - sqlalchemy.engine.Engine - INFO - [cached since 0.04092s ago] ('user_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-29 19:06:07,472 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE app_users (
	id UUID NOT NULL, 
	user_id VARCHAR NOT NULL, 
	name VARCHAR NOT NULL, 
	email VARCHAR NOT NULL, 
	phone VARCHAR, 
	password_hash VARCHAR NOT NULL, 
	user_type VARCHAR, 
	points INTEGER, 
	role VARCHAR, 
	registration_date TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	is_active BOOLEAN, 
	last_login TIMESTAMP WITHOUT TIME ZONE, 
	telegram_id INTEGER, 
	PRIMARY KEY (id)
)


2025-08-29 19:06:07,472 - sqlalchemy.engine.Engine - INFO - [no key 0.00093s] ()
2025-08-29 19:06:07,505 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_app_users_email ON app_users (email)
2025-08-29 19:06:07,505 - sqlalchemy.engine.Engine - INFO - [no key 0.00055s] ()
2025-08-29 19:06:07,508 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_app_users_user_id ON app_users (user_id)
2025-08-29 19:06:07,508 - sqlalchemy.engine.Engine - INFO - [no key 0.00066s] ()
2025-08-29 19:06:07,515 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE qr_codes (
	id UUID NOT NULL, 
	qr_id VARCHAR NOT NULL, 
	product_name VARCHAR NOT NULL, 
	category VARCHAR NOT NULL, 
	points INTEGER NOT NULL, 
	description TEXT, 
	created_by UUID, 
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	scanned_count INTEGER, 
	last_scanned TIMESTAMP WITHOUT TIME ZONE, 
	is_used BOOLEAN, 
	used_by UUID, 
	used_at TIMESTAMP WITHOUT TIME ZONE, 
	PRIMARY KEY (id), 
	FOREIGN KEY(created_by) REFERENCES app_users (id), 
	FOREIGN KEY(used_by) REFERENCES app_users (id)
)


2025-08-29 19:06:07,517 - sqlalchemy.engine.Engine - INFO - [no key 0.00122s] ()
2025-08-29 19:06:07,529 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_qr_codes_qr_id ON qr_codes (qr_id)
2025-08-29 19:06:07,531 - sqlalchemy.engine.Engine - INFO - [no key 0.00074s] ()
2025-08-29 19:06:07,536 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE cars (
	id UUID NOT NULL, 
	brand VARCHAR NOT NULL, 
	model VARCHAR NOT NULL, 
	year INTEGER NOT NULL, 
	price VARCHAR NOT NULL, 
	image_url VARCHAR, 
	description TEXT, 
	engine VARCHAR, 
	transmission VARCHAR, 
	fuel_type VARCHAR, 
	body_type VARCHAR, 
	drivetrain VARCHAR, 
	color VARCHAR, 
	is_active BOOLEAN, 
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	created_by UUID, 
	PRIMARY KEY (id), 
	FOREIGN KEY(created_by) REFERENCES app_users (id)
)


2025-08-29 19:06:07,536 - sqlalchemy.engine.Engine - INFO - [no key 0.00142s] ()
2025-08-29 19:06:07,546 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE products (
	id UUID NOT NULL, 
	name VARCHAR NOT NULL, 
	category VARCHAR NOT NULL, 
	points_cost INTEGER NOT NULL, 
	image_url VARCHAR, 
	description TEXT, 
	stock_quantity INTEGER, 
	is_active BOOLEAN, 
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	delivery_options JSONB, 
	created_by UUID, 
	PRIMARY KEY (id), 
	FOREIGN KEY(created_by) REFERENCES app_users (id)
)


2025-08-29 19:06:07,546 - sqlalchemy.engine.Engine - INFO - [no key 0.00096s] ()
2025-08-29 19:06:07,557 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE news_articles (
	id UUID NOT NULL, 
	title VARCHAR NOT NULL, 
	content TEXT NOT NULL, 
	image_url VARCHAR, 
	is_important BOOLEAN, 
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	published_at TIMESTAMP WITHOUT TIME ZONE, 
	is_published BOOLEAN, 
	author_id UUID, 
	tags JSONB, 
	PRIMARY KEY (id), 
	FOREIGN KEY(author_id) REFERENCES app_users (id)
)


2025-08-29 19:06:07,559 - sqlalchemy.engine.Engine - INFO - [no key 0.00104s] ()
2025-08-29 19:06:07,568 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE lotteries (
	id UUID NOT NULL, 
	title VARCHAR NOT NULL, 
	description TEXT NOT NULL, 
	prize VARCHAR NOT NULL, 
	start_date TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	end_date TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	is_active BOOLEAN, 
	participants JSONB, 
	winner_id UUID, 
	min_points_required INTEGER, 
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	image_url VARCHAR, 
	PRIMARY KEY (id), 
	FOREIGN KEY(winner_id) REFERENCES app_users (id)
)


2025-08-29 19:06:07,569 - sqlalchemy.engine.Engine - INFO - [no key 0.00130s] ()
2025-08-29 19:06:07,576 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE point_transactions (
	id UUID NOT NULL, 
	user_id UUID NOT NULL, 
	type VARCHAR NOT NULL, 
	amount INTEGER NOT NULL, 
	description TEXT NOT NULL, 
	timestamp TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	related_id UUID, 
	qr_scan_id UUID, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES app_users (id)
)


2025-08-29 19:06:07,576 - sqlalchemy.engine.Engine - INFO - [no key 0.00116s] ()
2025-08-29 19:06:07,587 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE support_tickets (
	id UUID NOT NULL, 
	user_id UUID NOT NULL, 
	subject VARCHAR NOT NULL, 
	status VARCHAR, 
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	updated_at TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	priority VARCHAR, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES app_users (id)
)


2025-08-29 19:06:07,587 - sqlalchemy.engine.Engine - INFO - [no key 0.00089s] ()
2025-08-29 19:06:07,597 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_sessions (
	id UUID NOT NULL, 
	user_id UUID NOT NULL, 
	token VARCHAR NOT NULL, 
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	expires_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	is_active BOOLEAN, 
	device_info TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES app_users (id)
)


2025-08-29 19:06:07,597 - sqlalchemy.engine.Engine - INFO - [no key 0.00095s] ()
2025-08-29 19:06:07,605 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_user_sessions_token ON user_sessions (token)
2025-08-29 19:06:07,605 - sqlalchemy.engine.Engine - INFO - [no key 0.00055s] ()
2025-08-29 19:06:07,609 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE orders (
	id UUID NOT NULL, 
	user_id UUID NOT NULL, 
	product_id UUID NOT NULL, 
	points_spent INTEGER NOT NULL, 
	status VARCHAR, 
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	delivery_address TEXT, 
	delivery_option VARCHAR NOT NULL, 
	tracking_number VARCHAR, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES app_users (id), 
	FOREIGN KEY(product_id) REFERENCES products (id)
)


2025-08-29 19:06:07,610 - sqlalchemy.engine.Engine - INFO - [no key 0.00091s] ()
2025-08-29 19:06:07,619 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE price_requests (
	id UUID NOT NULL, 
	user_id UUID NOT NULL, 
	car_id UUID NOT NULL, 
	user_message TEXT, 
	status VARCHAR, 
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	dealer_response TEXT, 
	estimated_price VARCHAR, 
	responded_at TIMESTAMP WITHOUT TIME ZONE, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES app_users (id), 
	FOREIGN KEY(car_id) REFERENCES cars (id)
)


2025-08-29 19:06:07,619 - sqlalchemy.engine.Engine - INFO - [no key 0.00100s] ()
2025-08-29 19:06:07,631 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE app_qr_scans (
	id UUID NOT NULL, 
	qr_id UUID NOT NULL, 
	user_id UUID NOT NULL, 
	points_earned INTEGER NOT NULL, 
	product_name VARCHAR NOT NULL, 
	product_category VARCHAR NOT NULL, 
	timestamp TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	location VARCHAR, 
	PRIMARY KEY (id), 
	FOREIGN KEY(qr_id) REFERENCES qr_codes (id), 
	FOREIGN KEY(user_id) REFERENCES app_users (id)
)


2025-08-29 19:06:07,631 - sqlalchemy.engine.Engine - INFO - [no key 0.00108s] ()
2025-08-29 19:06:07,641 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE support_messages (
	id UUID NOT NULL, 
	ticket_id UUID NOT NULL, 
	content TEXT NOT NULL, 
	sender_id UUID NOT NULL, 
	sender_role VARCHAR NOT NULL, 
	timestamp TIMESTAMP WITHOUT TIME ZONE DEFAULT now(), 
	attachments JSONB, 
	PRIMARY KEY (id), 
	FOREIGN KEY(ticket_id) REFERENCES support_tickets (id), 
	FOREIGN KEY(sender_id) REFERENCES app_users (id)
)


2025-08-29 19:06:07,643 - sqlalchemy.engine.Engine - INFO - [no key 0.00083s] ()
2025-08-29 19:06:07,652 - __main__ - INFO - База данных инициализирована
2025-08-29 19:06:07,652 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-29 19:06:07,656 - __main__ - INFO - Запуск API сервера на 0.0.0.0:8080
2025-08-29 19:07:11,787 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-29 19:07:11,787 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-29 19:07:11,789 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] ()
2025-08-29 19:07:11,789 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-29 19:07:11,796 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:07:11 +0300] "GET /health HTTP/1.1" 200 268 "-" "Mozilla/5.0 (Windows NT; Windows NT 10.0; ru-RU) WindowsPowerShell/5.1.26100.4768"
2025-08-29 19:08:14,938 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:08:14 +0300] "GET /api/v1/register HTTP/1.1" 405 212 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
2025-08-29 19:08:14,993 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:08:14 +0300] "GET /favicon.ico HTTP/1.1" 404 173 "http://localhost:8080/api/v1/register" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
2025-08-29 19:08:20,588 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:08:20 +0300] "GET /api/ HTTP/1.1" 404 173 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
2025-08-29 19:08:46,251 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-29 19:08:46,251 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-29 19:08:46,251 - sqlalchemy.engine.Engine - INFO - [cached since 94.46s ago] ()
2025-08-29 19:08:46,254 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-29 19:08:46,259 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:08:46 +0300] "GET /health HTTP/1.1" 200 268 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
2025-08-29 19:09:28,504 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:09:28 +0300] "GET /api/v1/cars HTTP/1.1" 401 207 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
2025-08-29 19:10:36,754 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:10:36 +0300] "GET /api/v1/products HTTP/1.1" 401 207 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
2025-08-29 19:13:29,917 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-29 19:13:29,949 - sqlalchemy.engine.Engine - INFO - SELECT products.id, products.name, products.category, products.points_cost, products.image_url, products.description, products.stock_quantity, products.is_active, products.created_at, products.delivery_options, products.created_by 
FROM products 
WHERE products.is_active = true ORDER BY products.created_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2025-08-29 19:13:29,954 - sqlalchemy.engine.Engine - INFO - [generated in 0.00132s] (50, 0)
2025-08-29 19:13:29,964 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-29 19:13:29,965 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:13:29 +0300] "GET /api/v1/products HTTP/1.1" 200 216 "-" "Mozilla/5.0 (Windows NT; Windows NT 10.0; ru-RU) WindowsPowerShell/5.1.26100.4768"
2025-08-29 19:13:38,091 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-29 19:13:38,093 - sqlalchemy.engine.Engine - INFO - SELECT news_articles.id, news_articles.title, news_articles.content, news_articles.image_url, news_articles.is_important, news_articles.created_at, news_articles.published_at, news_articles.is_published, news_articles.author_id, news_articles.tags 
FROM news_articles 
WHERE news_articles.is_published = true ORDER BY news_articles.published_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2025-08-29 19:13:38,093 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] (50, 0)
2025-08-29 19:13:38,098 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-29 19:13:38,101 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:13:38 +0300] "GET /api/v1/news HTTP/1.1" 200 212 "-" "Mozilla/5.0 (Windows NT; Windows NT 10.0; ru-RU) WindowsPowerShell/5.1.26100.4768"
2025-08-29 19:13:47,361 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-29 19:13:47,371 - sqlalchemy.engine.Engine - INFO - SELECT cars.id, cars.brand, cars.model, cars.year, cars.price, cars.image_url, cars.description, cars.engine, cars.transmission, cars.fuel_type, cars.body_type, cars.drivetrain, cars.color, cars.is_active, cars.created_at, cars.created_by 
FROM cars 
WHERE cars.is_active = true ORDER BY cars.created_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2025-08-29 19:13:47,372 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] (50, 0)
2025-08-29 19:13:47,378 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-29 19:13:47,379 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:13:47 +0300] "GET /api/v1/cars HTTP/1.1" 200 212 "-" "Mozilla/5.0 (Windows NT; Windows NT 10.0; ru-RU) WindowsPowerShell/5.1.26100.4768"
2025-08-29 19:13:53,226 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-29 19:13:53,232 - sqlalchemy.engine.Engine - INFO - SELECT count(qr_codes.id) AS count_1 
FROM qr_codes
2025-08-29 19:13:53,236 - sqlalchemy.engine.Engine - INFO - [generated in 0.00343s] ()
2025-08-29 19:13:53,273 - sqlalchemy.engine.Engine - INFO - SELECT count(qr_codes.id) AS count_1 
FROM qr_codes 
WHERE qr_codes.is_used = false
2025-08-29 19:13:53,274 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ()
2025-08-29 19:13:53,276 - sqlalchemy.engine.Engine - INFO - SELECT count(qr_codes.id) AS count_1 
FROM qr_codes 
WHERE qr_codes.is_used = true
2025-08-29 19:13:53,276 - sqlalchemy.engine.Engine - INFO - [generated in 0.00102s] ()
2025-08-29 19:13:53,283 - sqlalchemy.engine.Engine - INFO - SELECT sum(qr_codes.scanned_count) AS sum_1 
FROM qr_codes
2025-08-29 19:13:53,283 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] ()
2025-08-29 19:13:53,290 - sqlalchemy.engine.Engine - INFO - SELECT count(app_users.id) AS count_1 
FROM app_users
2025-08-29 19:13:53,290 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] ()
2025-08-29 19:13:53,298 - sqlalchemy.engine.Engine - INFO - SELECT count(app_users.id) AS count_1 
FROM app_users 
WHERE app_users.is_active = true
2025-08-29 19:13:53,298 - sqlalchemy.engine.Engine - INFO - [generated in 0.00098s] ()
2025-08-29 19:13:53,302 - sqlalchemy.engine.Engine - INFO - SELECT count(app_qr_scans.id) AS count_1 
FROM app_qr_scans
2025-08-29 19:13:53,305 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ()
2025-08-29 19:13:53,311 - sqlalchemy.engine.Engine - INFO - SELECT count(distinct(app_qr_scans.user_id)) AS count_1 
FROM app_qr_scans
2025-08-29 19:13:53,315 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ()
2025-08-29 19:13:53,321 - sqlalchemy.engine.Engine - INFO - SELECT sum(app_qr_scans.points_earned) AS sum_1 
FROM app_qr_scans
2025-08-29 19:13:53,321 - sqlalchemy.engine.Engine - INFO - [generated in 0.00182s] ()
2025-08-29 19:13:53,324 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-29 19:13:53,324 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:13:53 +0300] "GET /api/v1/statistics HTTP/1.1" 200 377 "-" "Mozilla/5.0 (Windows NT; Windows NT 10.0; ru-RU) WindowsPowerShell/5.1.26100.4768"
2025-08-29 19:13:58,617 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-29 19:13:58,620 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-29 19:13:58,620 - sqlalchemy.engine.Engine - INFO - [cached since 406.8s ago] ()
2025-08-29 19:13:58,623 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-29 19:13:58,624 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:13:58 +0300] "GET /health HTTP/1.1" 200 268 "-" "Mozilla/5.0 (Windows NT; Windows NT 10.0; ru-RU) WindowsPowerShell/5.1.26100.4768"
2025-08-29 19:14:27,800 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-29 19:14:27,801 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-29 19:14:27,803 - sqlalchemy.engine.Engine - INFO - [cached since 436s ago] ()
2025-08-29 19:14:27,804 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-29 19:14:27,806 - aiohttp.access - INFO - 127.0.0.1 [29/Aug/2025:19:14:27 +0300] "GET /health HTTP/1.1" 200 268 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"
2025-08-30 12:56:17,151 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-30 12:56:17,151 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-30 12:56:17,160 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-30 12:56:17,160 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-30 12:56:17,164 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-30 12:56:17,165 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-30 12:56:17,168 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-30 12:56:17,173 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,174 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] ('qr_codes', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,196 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,197 - sqlalchemy.engine.Engine - INFO - [cached since 0.0237s ago] ('app_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,199 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,200 - sqlalchemy.engine.Engine - INFO - [cached since 0.02662s ago] ('cars', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,202 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,203 - sqlalchemy.engine.Engine - INFO - [cached since 0.02941s ago] ('products', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,205 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,206 - sqlalchemy.engine.Engine - INFO - [cached since 0.03263s ago] ('news_articles', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,209 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,209 - sqlalchemy.engine.Engine - INFO - [cached since 0.03586s ago] ('lotteries', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,211 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,212 - sqlalchemy.engine.Engine - INFO - [cached since 0.03875s ago] ('orders', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,213 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,214 - sqlalchemy.engine.Engine - INFO - [cached since 0.04131s ago] ('price_requests', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,216 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,217 - sqlalchemy.engine.Engine - INFO - [cached since 0.04385s ago] ('point_transactions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,219 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,220 - sqlalchemy.engine.Engine - INFO - [cached since 0.04659s ago] ('app_qr_scans', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,221 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,222 - sqlalchemy.engine.Engine - INFO - [cached since 0.0488s ago] ('support_tickets', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,224 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,224 - sqlalchemy.engine.Engine - INFO - [cached since 0.05122s ago] ('support_messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,226 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-30 12:56:17,227 - sqlalchemy.engine.Engine - INFO - [cached since 0.0539s ago] ('user_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-30 12:56:17,229 - __main__ - INFO - База данных инициализирована
2025-08-30 12:56:17,230 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-30 12:56:17,233 - __main__ - INFO - Запуск API сервера на 0.0.0.0:8080
2025-08-30 13:02:27,385 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-30 13:02:27,432 - sqlalchemy.engine.Engine - INFO - SELECT app_users.id, app_users.user_id, app_users.name, app_users.email, app_users.phone, app_users.password_hash, app_users.user_type, app_users.points, app_users.role, app_users.registration_date, app_users.is_active, app_users.last_login, app_users.telegram_id 
FROM app_users 
WHERE app_users.email = $1::VARCHAR
2025-08-30 13:02:27,432 - sqlalchemy.engine.Engine - INFO - [generated in 0.00161s] ('admin@example.com',)
2025-08-30 13:02:27,456 - sqlalchemy.engine.Engine - INFO - INSERT INTO app_users (id, user_id, name, email, phone, password_hash, user_type, points, role, is_active, last_login, telegram_id) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::BOOLEAN, $11::TIMESTAMP WITHOUT TIME ZONE, $12::INTEGER) RETURNING app_users.registration_date
2025-08-30 13:02:27,456 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] (UUID('6b01e5fa-05d6-4ccd-99cd-bb704f07b7b9'), '3d4ec174-b44c-4644-a312-2f5c646d8dd7', 'Admin User', 'admin@example.com', '+1234567890', '240be518fabd2724ddb6f04eeb1da5967448d7e831c08c8fa822809f74c720a9', 'individual', 100, 'user', True, None, None)
2025-08-30 13:02:27,473 - sqlalchemy.engine.Engine - INFO - INSERT INTO point_transactions (id, user_id, type, amount, description, related_id, qr_scan_id) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::INTEGER, $5::VARCHAR, $6::UUID, $7::UUID) RETURNING point_transactions.timestamp
2025-08-30 13:02:27,473 - sqlalchemy.engine.Engine - INFO - [generated in 0.00107s] (UUID('253bbb43-6073-471f-9b21-796482a29d2f'), UUID('6b01e5fa-05d6-4ccd-99cd-bb704f07b7b9'), 'bonus', 100, 'Бонус за регистрацию', None, None)
2025-08-30 13:02:27,488 - sqlalchemy.engine.Engine - INFO - INSERT INTO user_sessions (id, user_id, token, expires_at, is_active, device_info) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::TIMESTAMP WITHOUT TIME ZONE, $5::BOOLEAN, $6::VARCHAR) RETURNING user_sessions.created_at
2025-08-30 13:02:27,488 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] (UUID('21014d5b-aacd-4086-8fe6-833a898c848e'), UUID('6b01e5fa-05d6-4ccd-99cd-bb704f07b7b9'), 'rYTmTTwm8DmWnh3UhmHOXW-jliGp6REYwy5Oq2Ro1ZA', datetime.datetime(2025, 9, 29, 13, 2, 27, 469194), True, 'PowerShell Test')
2025-08-30 13:02:27,496 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-30 13:02:27,502 - aiohttp.access - INFO - 127.0.0.1 [30/Aug/2025:13:02:27 +0300] "POST /api/v1/register HTTP/1.1" 200 514 "-" "Mozilla/5.0 (Windows NT; Windows NT 10.0; ru-RU) WindowsPowerShell/5.1.26100.4768"
2025-08-30 13:04:08,460 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-30 13:04:08,463 - sqlalchemy.engine.Engine - INFO - SELECT app_users.id, app_users.user_id, app_users.name, app_users.email, app_users.phone, app_users.password_hash, app_users.user_type, app_users.points, app_users.role, app_users.registration_date, app_users.is_active, app_users.last_login, app_users.telegram_id 
FROM app_users JOIN user_sessions ON app_users.id = user_sessions.user_id 
WHERE user_sessions.token = $1::VARCHAR AND user_sessions.is_active = true AND user_sessions.expires_at > now()
2025-08-30 13:04:08,463 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('rYTmTTwm8DmWnh3UhmHOXW-jliGp6REYwy5Oq2Ro1ZA',)
2025-08-30 13:04:08,476 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-30 13:04:08,478 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-30 13:04:08,484 - sqlalchemy.engine.Engine - INFO - INSERT INTO cars (id, brand, model, year, price, image_url, description, engine, transmission, fuel_type, body_type, drivetrain, color, is_active, created_by) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::VARCHAR, $9::VARCHAR, $10::VARCHAR, $11::VARCHAR, $12::VARCHAR, $13::VARCHAR, $14::BOOLEAN, $15::UUID) RETURNING cars.created_at
2025-08-30 13:04:08,484 - sqlalchemy.engine.Engine - INFO - [generated in 0.00126s] (UUID('9efbd16b-6f2b-416c-8e13-dbc140fdc8b9'), 'Toyota', 'Camry', 2023, '25000', None, 'Test car', '2.5L', 'Automatic', 'Gasoline', 'Sedan', '', 'White', True, UUID('6b01e5fa-05d6-4ccd-99cd-bb704f07b7b9'))
2025-08-30 13:04:08,493 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-30 13:04:08,529 - aiohttp.access - INFO - 127.0.0.1 [30/Aug/2025:13:04:08 +0300] "POST /api/v1/cars HTTP/1.1" 200 263 "-" "Mozilla/5.0 (Windows NT; Windows NT 10.0; ru-RU) WindowsPowerShell/5.1.26100.4768"
2025-08-30 13:04:23,843 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-30 13:04:23,846 - sqlalchemy.engine.Engine - INFO - SELECT cars.id, cars.brand, cars.model, cars.year, cars.price, cars.image_url, cars.description, cars.engine, cars.transmission, cars.fuel_type, cars.body_type, cars.drivetrain, cars.color, cars.is_active, cars.created_at, cars.created_by 
FROM cars 
WHERE cars.is_active = true ORDER BY cars.created_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2025-08-30 13:04:23,846 - sqlalchemy.engine.Engine - INFO - [generated in 0.00102s] (50, 0)
2025-08-30 13:04:23,876 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-30 13:04:23,878 - aiohttp.access - INFO - 127.0.0.1 [30/Aug/2025:13:04:23 +0300] "GET /api/v1/cars HTTP/1.1" 200 580 "-" "Mozilla/5.0 (Windows NT; Windows NT 10.0; ru-RU) WindowsPowerShell/5.1.26100.4768"
